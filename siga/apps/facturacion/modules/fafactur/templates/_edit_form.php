<?php

// auto-generated by PropelCidesa
// date: 2009/01/07 11:29:22
?>
<?php

echo form_tag('fafactur/save', array (
	'id' => 'sf_admin_edit_form',
	'name' => 'sf_admin_edit_form',
	'multipart' => true,

))
?>
<?php echo javascript_include_tag('dFilter', 'ajax', 'facturacion/facturas', 'tools') ?>
<?php echo object_input_hidden_tag($fafactur, 'getId') ?>
<?php echo input_hidden_tag('fafactur[afeinvfac]', $fafactur->getAfeinvfac()) ?>
<?php echo input_hidden_tag('fafactur[manporped]', $fafactur->getManporped()) ?>
<?php echo input_hidden_tag('fafactur[manprecon]', $fafactur->getManprecon()) ?>
<?php echo input_hidden_tag('fafactur[calrecdes]', $fafactur->getCalrecdes()) ?>
<?php echo object_input_hidden_tag($fafactur, 'getCodcli', array('id' => 'fafactur_codcli', 'name' => 'fafactur[codcli]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getReapor', array('id' => 'fafactur_reapor', 'name' => 'fafactur[reapor]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getStatus', array('id' => 'fafactur_status', 'name' => 'fafactur[status]')) ?>
<?php //echo object_input_hidden_tag($fafactur, 'getValmon', array('id' => 'fafactur_valmon', 'name' => 'fafactur[valmon]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getNumcom', array('id' => 'fafactur_numcom', 'name' => 'fafactur[numcom]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getNumcomord', array('id' => 'fafactur_numcomord', 'name' => 'fafactur[numcomord]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getNumcominv', array('id' => 'fafactur_numcominv', 'name' => 'fafactur[numcominv]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getIncluircliente', array('id' => 'fafactur_incluircliente', 'name' => 'fafactur[incluircliente]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getTipconpag', array('id' => 'fafactur_tipconpag', 'name' => 'fafactur[tipconpag]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getTipo', array('id' => 'fafactur_tipo', 'name' => 'fafactur[tipo]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getApliclades', array('id' => 'fafactur_apliclades', 'name' => 'fafactur[apliclades]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getDocrefiera', array('id' => 'fafactur_docrefiera', 'name' => 'fafactur[docrefiera]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getCtacli', array('id' => 'fafactur_ctacli', 'name' => 'fafactur[ctacli]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getTipocliente', array('id' => 'fafactur_tipocliente', 'name' => 'fafactur[tipocliente]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getLimitecredito', array('id' => 'fafactur_limitecredito', 'name' => 'fafactur[limitecredito]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getEsretencion', array('id' => 'fafactur_esretencion', 'name' => 'fafactur[esretencion]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getMonedaanterior', array('id' => 'fafactur_monedaanterior', 'name' => 'fafactur[monedaanterior]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getTrajo', array('id' => 'fafactur_trajo', 'name' => 'fafactur[trajo]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getPorcentajedescto', array('id' => 'fafactur_porcentajedescto', 'name' => 'fafactur[porcentajedescto]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getLonart', array('id' => 'fafactur_lonart', 'name' => 'fafactur[lonart]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getRgofijos', array('id' => 'fafactur_rgofijos', 'name' => 'fafactur[rgofijos]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getCtasociada', array('id' => 'fafactur_ctasociada', 'name' => 'fafactur[ctasociada]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getFilgenmov', array('id' => 'fafactur_filgenmov', 'name' => 'fafactur[filgenmov]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getMancatdes', array('id' => 'fafactur_mancatdes', 'name' => 'fafactur[mancatdes]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getNumfilas', array('id' => 'fafactur_numfilas', 'name' => 'fafactur[numfilas]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getFilactrec', array('id' => 'fafactur_filactrec', 'name' => 'fafactur[filactrec]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getFilactdes', array('id' => 'fafactur_filactdes', 'name' => 'fafactur[filactdes]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getFadescripfacId', array('id' => 'fafactur_fadescripfac_id', 'name' => 'fafactur[fadescripfac_id]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getIdrefer', array('id' => 'fafactur_idrefer', 'name' => 'fafactur[idrefer]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getTierecar', array('id' => 'fafactur_tierecar', 'name' => 'fafactur[tierecar]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getCodalmcaj', array('id' => 'fafactur_codalmcaj', 'name' => 'fafactur[codalmcaj]')) ?>
<?php echo object_input_hidden_tag($fafactur, 'getEsprecon', array('id' => 'fafactur_esprecon', 'name' => 'fafactur[esprecon]')) ?>

<input id="oculaplrec" name="oculaplrec" type="hidden" value="<?php echo H::getConfApp2('oculaplrec', 'facturacion', 'fafactur'); ?>">


<div id="CajaPrinc" style="display:none">
<fieldset id="Caja" class="">
<legend><?php echo __('Clave')?></legend>
<div class="form-row" id="divcodcaj">
<font color="BLACK" size="3" face="Verdana, Arial, Helvetica, sans-serif">
<p align="center">
<?php echo __('Para poder Facturar debe elegir primero un tipo de caja para determinar el funcionamiento del correlativo') ?>
</p>
</font>
<br>
<table width="100%">
<tr>
<td Align="center">
<?php
 echo select_tag('fafactur[codcaj]', options_for_select(FadefcajPeer :: getCajas(), $fafactur->getCodcaj(),'include_custom=Seleccione una caja ...'), array (
	'style' => 'width:200px'
))
?>
</td>
</tr>
</table>
  <br>

  <div align="center">
   <input type="button" value="Aceptar" onClick="aceptar1();">
  </div>

</div>
</fieldset>
</div>

<div id="ClaveDes" style="display:none">
<fieldset id="Descuento" class="">
<legend><?php echo __('Clave')?></legend>
<div id="usudes">
<font color="BLACK" size="3" face="Verdana, Arial, Helvetica, sans-serif">
<p align="center">
<?php echo __('Para poder aplicar un Descuento debe introducir un USUARIO AUTORIZADO') ?>
</p>
</font>
<br>

<table width="100%">
<tr>
<td Align="center">
<?php
 echo select_tag('fafactur[usuarios]', options_for_select(FacladtoPeer :: getUsuarios(), $fafactur->getUsuarios()), array (
	'style' => 'width:150px'
))
?>
<br><br>
  <?php
 $value = object_input_tag($fafactur, 'getPassword', array (
	'size' => 20,
	'control_name' => 'fafactur[password]',
	'maxlength' => 8,

));
echo $value ? $value : '&nbsp;'
?>

</td>
</tr>
</table>


<div class="form-row" align="center">
   <input type="button" value="Aceptar" onClick="aceptar2();">
   <input type="button" value="Cancelar" onClick="ocultar('ClaveDes');">
</div>

</div>
</fieldset>
</div>

<div id="FormaPrinc" style="display:none">
  <div id="divbtnprint">
  <?php if($labels['fafactur{btnprint}']!='.:') { ?>
  <?php echo label_for('fafactur[btnprint]', __($labels['fafactur{btnprint}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{btnprint}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{btnprint}')): ?>
    <?php echo form_error('fafactur{btnprint}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = get_partial('btnprint', array('type' => 'edit', 'fafactur' => $fafactur,'labels' => $labels,'params' => $params,'grabo' => $grabo)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{btnprint}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<ul class="sf_admin_actions">
<li class="float-left">
<strong><font color="#CC0000" size="3" face="Verdana, Arial, Helvetica, sans-serif"> <? print $fafactur->getEstatus();?></font></strong>
</li>
<li class="float-left">
<strong><font color="#CC0000" size="2" face="Verdana, Arial, Helvetica, sans-serif"> <? print $fafactur->getNotacredito();?></font></strong>
</li>
<?php if($sf_user->getAttribute('clavecaja', null, 'fafactur')) : ?>
<li>
<input id="cerrar" type="button" name="Submit2" value="Cerrar Caja" class="sf_admin_action_delete" onclick="cerrar2();"/>
</li>
<?php else : ?>
<li>
<strong><font color="#CC0000" size="3" face="Verdana, Arial, Helvetica, sans-serif">No se ha seleccionado la caja</font></strong>
</li>
<?php endif; ?>
</ul>
<h2 class="h2" onclick="javascript: return $('divDatos de la Factura').toggle();"><?php echo __('Datos de la Factura') ?></h2>
<fieldset id="sf_fieldset_datos_de_la_factura" class="">

<div class="form-row" id="divDatos de la Factura">
<table>
<tr>
<th>
<div id="divreffac">
  <?php echo label_for('fafactur[reffac]', __($labels['fafactur{reffac}' ]), 'class="required" Style="text-align:left; width:50px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{reffac}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{reffac}')): ?>
    <?php echo form_error('fafactur{reffac}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php $value = object_input_tag($fafactur, 'getReffac', array (
	'size' => 20,
	'control_name' => 'fafactur[reffac]',
	'maxlength' => 8,
	'readonly'  =>  $fafactur->getId()!='' ? true : false ,
    'onKeyPress' => "javascript:if (event.keyCode==13 || event.keyCode==9){document.getElementById('fafactur_fecfac').focus();}",
    'onBlur'  => "javascript:event.keyCode=13; enter(event,this.value);",
));
echo $value ? $value : '&nbsp;'
?>
 </div>
</div>
</th>
<th>
<div id="divfecfac">
  <?php echo label_for('fafactur[fecfac]', __($labels['fafactur{fecfac}' ]), 'class="required" Style="text-align:left; width:50px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{fecfac}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{fecfac}')): ?>
    <?php echo form_error('fafactur{fecfac}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_input_date_tag($fafactur, 'getFecfac', array (
	'rich' => true,
	'calendar_button_img' => '/sf/sf_admin/images/date.png',
	'control_name' => 'fafactur[fecfac]',
	'date_format' => 'dd/MM/yyyy',
	'size' => 10,
	'maxlength' => 10,
	'onkeyup' => "javascript: mascara(this,'/',patron,true)",
	'onBlur'=> remote_function(array(
        'url'      => 'fafactur/ajax',
        'complete' => 'AjaxJSON(request, json)',
        'condition' => "$('fafactur_fecfac').value != '' && $('id').value == ''",
        'with' => "'ajax=17&codigo='+this.value"
        ))
),date('Y-m-d'));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>
</th>
<th>
<div id="divnumcontrol">
  <?php echo label_for('fafactur[numcontrol]', __($labels['fafactur{numcontrol}' ]), 'class="required" Style="text-align:left; width:50px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{numcontrol}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{numcontrol}')): ?>
    <?php echo form_error('fafactur{numcontrol}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php $value = object_input_tag($fafactur, 'getNumcontrol', array (
	'size' => 20,
	'control_name' => 'fafactur[numcontrol]',
	'maxlength' => 10,
	'readonly'  =>  $fafactur->getId()!='' ? true : false ,
  'onBlur'  => "if(this.value=='') this.value='##########';",
));
echo $value ? $value : '&nbsp;'
?>
 </div>
</div>
</th>
</tr>

  <tr style="display:<?php if($fafactur->getId() && $fafactur->getProform()=='') echo 'none'; else echo '';?>">
  <th>
      <?php echo label_for('fafactur[refproform]', __($labels['fafactur{refproform}']), 'class="required" style="width: 150px"') ?>
      <div class="content<?php if ($sf_request->hasError('fafactur{refproform}')): ?> form-error<?php endif; ?>">
      <?php if ($sf_request->hasError('fafactur{refproform}')): ?>
        <?php echo form_error('fafactur{refproform}', array('class' => 'form-error-msg')) ?>
      <?php endif; ?>

      <?php $value = object_checkbox_tag($fafactur, 'getRefproform', array (
      'control_name' => 'fafactur[refproform]',
        'onClick' => 'refproform()',
    )); echo $value ? $value : '&nbsp;' ?>
        </div>
  </th>
  <th id="thproform" style="display:<?php if((!$fafactur->getRefproform()) && $fafactur->getProform()=='') echo 'none'; else echo '';?>">
      <?php echo label_for('fafactur[proform]', __($labels['fafactur{proform}']), 'class="required" style="width: 150px"') ?>
      <div class="content<?php if ($sf_request->hasError('fafactur{proform}')): ?> form-error<?php endif; ?>">
      <?php if ($sf_request->hasError('fafactur{proform}')): ?>
        <?php echo form_error('fafactur{proform}', array('class' => 'form-error-msg')) ?>
      <?php endif; ?>

      <?php $value = object_input_tag($fafactur, 'getProform', array (
      'control_name' => 'fafactur[proform]',
       'onBlur'=> remote_function(array(
        'update'  =>       'divgrid_faartfac',
        'url'      => 'fafactur/ajax',
        'complete' => 'AjaxJSON(request, json)',
        'condition' => "$('fafactur_fecfac').value != '' && $('id').value == ''",
        'with' => "'ajax=19&codigo='+this.value"))
    )); echo $value ? $value : '&nbsp;' ?>
        <?php echo  button_to_popup('...',cross_app_link_to('herramientas','catalogo').'/metodo/Fafacturpro_reffac/clase/Fafacturpro/frame/sf_admin_edit_form/obj1/fafactur_proform/campo1/reffac/campo2/fecfac','','','buttoncat')?>
        </div>

  </th>
  </tr>
</table>

<br/>

<table><tr><th>
<div id="divtipref">
  <?php echo label_for('fafactur[tipref]', __($labels['fafactur{tipref}' ]), 'class="required" Style="text-align:left; width:50px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{tipref}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{tipref}')): ?>
    <?php echo form_error('fafactur{tipref}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php $value = get_partial('tipref', array('type' => 'edit', 'fafactur' => $fafactur)); echo $value ? $value : '&nbsp;' ?>
    </div>
</div>
</th>
<th>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</th>
<th>
<div id="divtipmon">
  <?php echo label_for('fafactur[tipmon]', __($labels['fafactur{tipmon}' ]), 'class="required" Style="text-align:left; width:50px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{tipmon}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{tipmon}')): ?>
    <?php echo form_error('fafactur{tipmon}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php $value = get_partial('tipmon', array('type' => 'edit', 'fafactur' => $fafactur)); echo $value ? $value : '&nbsp;' ?>
    </div>
</div>
</th>
</tr>
</table>

<br/>
<div id="divrifpro">
  <?php echo label_for('fafactur[rifpro]', __($labels['fafactur{rifpro}' ]), 'class="required" Style="text-align:left; width:50px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{rifpro}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{rifpro}')): ?>
    <?php echo form_error('fafactur{rifpro}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php $value = get_partial('rifpro', array('type' => 'edit', 'fafactur' => $fafactur)); echo $value ? $value : '&nbsp;' ?>
    </div>
</div>
<br/>
<table><tr><th>
<div id="divtelpro">
  <?php echo label_for('fafactur[telpro]', __($labels['fafactur{telpro}' ]), 'class="required" Style="text-align:left; width:50px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{telpro}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{telpro}')): ?>
    <?php echo form_error('fafactur{telpro}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_input_tag($fafactur, 'getTelpro', array (
	'readOnly' => true,
	'control_name' => 'fafactur[telpro]',

));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>
</th>
<th>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</th>
<th>
<div id="divtipper">
  <?php echo label_for('fafactur[tipper]', __($labels['fafactur{tipper}' ]), 'class="required" Style="text-align:left; width:50px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{tipper}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{tipper}')): ?>
    <?php echo form_error('fafactur{tipper}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

<? if ($fafactur->getTipper()=='N')  {
  ?><?php echo radiobutton_tag('fafactur[tipper]', 'N', true)        ."   Natural".'&nbsp;&nbsp;';
      echo radiobutton_tag('fafactur[tipper]', 'J', false)."     Jurídica";?>
    <?
}else{
  echo radiobutton_tag('fafactur[tipper]', 'N', false)        ."Natural".'&nbsp;&nbsp;';
  echo radiobutton_tag('fafactur[tipper]', 'J', true)."   Jurídica";

} ?>
    </div>
</div>
</th>
</tr>
</table>
<br/>
<div id="divdirpro">
  <?php echo label_for('fafactur[dirpro]', __($labels['fafactur{dirpro}' ]), 'class="required" Style="text-align:left; width:50px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{dirpro}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{dirpro}')): ?>
    <?php echo form_error('fafactur{dirpro}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_input_tag($fafactur, 'getDirpro', array (
	'readOnly' => true,
	'control_name' => 'fafactur[dirpro]',
	'size' => 60,

));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>
<br/>
<div id="divpuedph" style="display:none">
  <?php echo label_for('fafactur[puedph]', __($labels['fafactur{puedph}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{puedph}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{puedph}')): ?>
    <?php echo form_error('fafactur{puedph}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php $value = get_partial('puedph', array('type' => 'edit', 'fafactur' => $fafactur)); echo $value ? $value : '&nbsp;' ?>
    </div>
</div>
<br/>
<div id="divpuedes" style="display:none">
  <?php echo label_for('fafactur[puedes]', __($labels['fafactur{puedes}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{puedes}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{puedes}')): ?>
    <?php echo form_error('fafactur{puedes}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php $value = get_partial('puedes', array('type' => 'edit', 'fafactur' => $fafactur)); echo $value ? $value : '&nbsp;' ?>
    </div>
</div>
<br/>
<div id="divbuque" style="display:none">
  <?php echo label_for('fafactur[buque]', __($labels['fafactur{buque}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{buque}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{buque}')): ?>
    <?php echo form_error('fafactur{buque}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php $value = get_partial('buque', array('type' => 'edit', 'fafactur' => $fafactur)); echo $value ? $value : '&nbsp;' ?>
    </div>
</div>
<br/>
<div id="divcodconpag">
  <?php echo label_for('fafactur[codconpag]', __($labels['fafactur{codconpag}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{codconpag}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{codconpag}')): ?>
    <?php echo form_error('fafactur{codconpag}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php $value = get_partial('codconpag', array('type' => 'edit', 'fafactur' => $fafactur)); echo $value ? $value : '&nbsp;' ?>
    </div>
</div>
<br/>
<div id="divdesfac">
  <?php echo label_for('fafactur[desfac]', __($labels['fafactur{desfac}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{desfac}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{desfac}')): ?>
    <?php echo form_error('fafactur{desfac}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_textarea_tag($fafactur, 'getDesfac', array (
	'size' => '80x3',
	'control_name' => 'fafactur[desfac]',
	'maxlength' => 1000,
  'onkeyup' => 'return ismaxlength(this)',

));
echo $value ? $value : '&nbsp;'
?>
&nbsp;
<?php if ($fafactur->getMancatdes()=='S' && $fafactur->getId()=='') { ?>
<?php echo button_to_popup('...',cross_app_link_to('herramientas','catalogo').'/metodo/Fadescripfac_Fafacturpro/clase/Fadescripfac/frame/sf_admin_edit_form/obj1/fafactur_desfac/obj2/fafactur_fadescripfac_id/campo1/desfac/campo2/id')?>
<?php } ?>
    </div>
</div>
</BR>


<div id="divobserv">
  <?php echo label_for('fafactur[observ]', __($labels['fafactur{observ}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{observ}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{observ}')): ?>
    <?php echo form_error('fafactur{observ}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_textarea_tag($fafactur, 'getObserv', array (
  'control_name' => 'fafactur[observ]',
  'size' => '80x5',
  'maxlength' => 500,
  'onkeyup' => 'return ismaxlength(this)',

));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>


<br/>
<div id="divcodubi">
  <?php echo label_for('fafactur[codubi]', __($labels['fafactur{codubi}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{codubi}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{codubi}')): ?>
    <?php echo form_error('fafactur{codubi}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php $value = get_partial('codubi', array('type' => 'edit', 'fafactur' => $fafactur)); echo $value ? $value : '&nbsp;' ?>
    </div>
</div>
<br/>
<div id="divcodcon">
  <?php echo label_for('fafactur[codcon]', __($labels['fafactur{codcon}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{codcon}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{codcon}')): ?>
    <?php echo form_error('fafactur{codcon}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php $value = get_partial('codcon', array('type' => 'edit', 'fafactur' => $fafactur)); echo $value ? $value : '&nbsp;' ?>
    </div>
</div>
<br/>
<div id="divtipoven">
  <?php echo label_for('fafactur[tipoven]', __($labels['fafactur{tipoven}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{tipoven}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{tipoven}')): ?>
    <?php echo form_error('fafactur{tipoven}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php $value = get_partial('tipoven', array('type' => 'edit', 'fafactur' => $fafactur)); echo $value ? $value : '&nbsp;' ?>
    </div>
</div>
<br/>
<br/>
<div id="divcoddirec">
  <?php if($labels['fafactur{coddirec}']!='.:') { ?>
  <?php echo label_for('fafactur[coddirec]', __($labels['fafactur{coddirec}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{coddirec}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{coddirec}')): ?>
    <?php echo form_error('fafactur{coddirec}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
    
  <?php echo Catalogo($fafactur, 42, array (
  'getprincipal' => 'getCoddirec',
  'getsecundario' => 'getDesdirec',
  'campoprincipal' => 'coddirec',
  'camposecundario' => 'desdirec',
  'campobase' => 'id',
),  'Cadefdirec_Almdefdiv',  'Cadefdirec',  '',  '',  '');?>

    
  <?php if($labels['fafactur{coddirec}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<div id="divcodcenaco">
<?php echo label_for('fafactur[codcenaco]', __($labels['fafactur{codcenaco}']), 'class="required"') ?>
<div
  class="content<?php if ($sf_request->hasError('fafactur{codcenaco}')): ?> form-error<?php endif; ?>">
<?php if ($sf_request->hasError('fafactur{codcenaco}')): ?> <?php echo form_error('fafactur{codcenaco}', array('class' => 'form-error-msg')) ?>
<?php endif; ?>

  <?php $value = object_input_tag($fafactur, 'getCodcenaco', array (
  'size' => 10,
  'maxlength' => 4,
  'control_name' => 'fafactur[codcenaco]',
  'onBlur'=> remote_function(array(
              'url' => 'fafactur/ajax',
        'condition' => "$('fafactur_codcenaco').value!=''",
        'complete' => 'AjaxJSON(request, json)',
          'with' => "'ajax=26&cajtexmos=fafactur_descenaco&cajtexcom=fafactur_codcenaco&codigo='+this.value",
        )),
)); echo $value ? $value : '&nbsp;' ?>

<?php echo  button_to_popup('...',cross_app_link_to('herramientas','catalogo').'/metodo/Cadefcenaco_Almsolegr/clase/Cadefcenaco/frame/sf_admin_edit_form/obj1/fafactur_codcenaco/obj2/fafactur_descenaco/campo1/codcenaco/campo2/descenaco')?>

<?php $value = object_input_tag($fafactur, 'getDescenaco', array (
'size' => 50,
'maxlength' => 50,
'disabled' => true,
'control_name' => 'fafactur[descenaco]',
)); echo $value ? $value : '&nbsp;' ?>
<div class="sf_admin_edit_help"><?php echo __('Máximo 4 caracteres') ?></div></div></div>

<br/>
<table><tr><th>
<div id="divmonto">
  <?php echo label_for('fafactur[monto]', __($labels['fafactur{monto}' ]), 'class="required" Style="text-align:left; width:50px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{monto}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{monto}')): ?>
    <?php echo form_error('fafactur{monto}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_input_tag($fafactur, 'getMonto', array (
	'readonly' => true,
	'class' => 'grid_txtright',
	'size' => 10,
	'control_name' => 'fafactur[monto]',

));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>
</th>
<th>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</th>
<th>
<div id="divmonrgo">
  <?php echo label_for('fafactur[monrgo]', __($labels['fafactur{monrgo}' ]), 'class="required" Style="text-align:left; width:50px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{monrgo}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{monrgo}')): ?>
    <?php echo form_error('fafactur{monrgo}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_input_tag($fafactur, 'getMonrgo', array (
	'readonly' => true,
	'class' => 'grid_txtright',
	'size' => 10,
	'control_name' => 'fafactur[monrgo]',

));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>
</th>
<th>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</th>
<th>
<div id="divmondesc">
  <?php echo label_for('fafactur[mondesc]', __($labels['fafactur{mondesc}' ]), 'class="required" Style="text-align:left; width:50px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{mondesc}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{mondesc}')): ?>
    <?php echo form_error('fafactur{mondesc}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_input_tag($fafactur, array ('getMondesc',true), array (
	'size' => 10,
	'class' => 'grid_txtright',
	'onKeyPress' => 'return validaDecimal(event)',
	'onBlur' => 'event.keyCode=13;return formatoDecimal(event,this.id)',
	'control_name' => 'fafactur[mondesc]',
));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>
</th>
<th>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</th>
<th>
<div id="divmonfac">
  <?php echo label_for('fafactur[monfac]', __($labels['fafactur{monfac}' ]), 'class="required" Style="text-align:left; width:50px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{monfac}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{monfac}')): ?>
    <?php echo form_error('fafactur{monfac}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_input_tag($fafactur, array ('getMonfac',true), array (
	'size' => 10,
	'class' => 'grid_txtright',
	'onKeyPress' => 'return validaDecimal(event)',
	'onBlur' => 'event.keyCode=13;return formatoDecimal(event,this.id)',
	'control_name' => 'fafactur[monfac]',
));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>
</th></tr></table>
</div>
</fieldset>
<h2 class="h2" onclick="javascript: return $('divDetalle').toggle();"><?php echo __('Detalle') ?></h2>
<fieldset id="sf_fieldset_detalle" class="">
<ul class="sf_admin_actions">
<li>
<?php 
$gencomext=H::getConfApp2('gencomext', 'facturacion', 'fafactur');
if ($gencomext=='S') {
if ($fafactur->getId()=='') { ?>
<?php echo submit_to_remote('Submit2', 'Generar Comprobante', array(
         'update'   => 'comp',
         'url'      => 'fafactur/ajaxcomprobante',
         'script'   => true,
         'complete' => 'AjaxJSON(request, json)',
         'submit' => 'sf_admin_edit_form',
         ),array('use_style' => 'true', 'class' => 'sf_admin_action_save',)) ?>
</li>
<? } else { ?>
<li><input name="Comprobante" type="button" value="Comprobantes" class="sf_admin_action_save" onClick="consultarComp()"></li>
<?php } }?>
</ul>
<div id="comp"></div>
<div class="form-row" id="divDetalle">
<div id="combosl" style="display:none">
<?php echo label_for('fafactur[combo]', __($labels['fafactur{combo}' ]), 'class="required" Style="text-align:left; width:100px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{combo}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{combo}')): ?>
    <?php echo form_error('fafactur{combo}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php echo input_auto_complete_tag('fafactur[combo]', $fafactur->getCombo(),
    'fafactur/autocomplete?ajax=1',  array('autocomplete' => 'off','maxlength' => 6,
    'readonly'  =>  $fafactur->getId()!='' ? true : false ,
    'onBlur'=>'colocargrid2(this.id)'
    ),
     array('use_style' => 'true')
  )?>
&nbsp; 		&nbsp;		&nbsp;
 <?php echo  button_to_popup('...',cross_app_link_to('herramientas','catalogo').'/metodo/Fadefcom_Fafactur/clase/Fadefcom/frame/sf_admin_edit_form/obj1/fafactur_combo/campo1/codcom','','','botoncat')?>
    </div>
</div>
<div id="marcarrecargos" style="display:none">
  <?php echo label_for('fafactur[marrec]', __($labels['fafactur{marrec}']), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{marrec}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{marrec}')): ?>
    <?php echo form_error('fafactur{marrec}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php $value = object_checkbox_tag($fafactur, 'getMarrec', array (
  'control_name' => 'fafactur[marrec]',
  'onClick' => 'marcarTodoMod()',
)); echo $value ? $value : '&nbsp;' ?>
    </div>

<br>

  <?php echo label_for('fafactur[desrec]', __($labels['fafactur{desrec}']), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{desrec}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{desrec}')): ?>
    <?php echo form_error('fafactur{desrec}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php $value = object_checkbox_tag($fafactur, 'getDesrec', array (
  'control_name' => 'fafactur[desrec]',
  'onClick' => 'desmarcarTodoMod()',
)); echo $value ? $value : '&nbsp;' ?>
    </div>
<br>

  <?php echo label_for('fafactur[descli]', __($labels['fafactur{descli}']), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{descli}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{descli}')): ?>
    <?php echo form_error('fafactur{descli}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

<?php echo radiobutton_tag('fafactur[descli]', 'S', false)        ."   Si".'&nbsp;&nbsp;';
      echo radiobutton_tag('fafactur[descli]', 'N', true)."     No";?>
    </div>
<br>
</div>
    <br>
<div id="opcionajucal" style="display:none">
  <?php echo label_for('fafactur[ajucal]', __($labels['fafactur{ajucal}']), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{ajucal}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{ajucal}')): ?>
    <?php echo form_error('fafactur{ajucal}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

<?php echo radiobutton_tag('fafactur[ajucal]', 'S', false, array('onClick'=> '$("divbtufin").show();'))        ."   Si".'&nbsp;&nbsp;';
      echo radiobutton_tag('fafactur[ajucal]', 'N', true, array('onClick'=> '$("divbtufin").hide(); $("fafactur_btufin").value="0,00";'))."     No";?>
    </div>
    <br>    
    <div id="divbtufin" style="display: none">
  <?php echo label_for('fafactur[btufin]', __($labels['fafactur{btufin}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{btufin}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{btufin}')): ?>
    <?php echo form_error('fafactur{btufin}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

      <?php  $value = object_input_tag($fafactur, array ('getBtufin',true), array (
            'size' => 10,
            'class' => 'grid_txtright',
            'onKeyPress' => 'return validaDecimal(event)',
            'onBlur' => 'event.keyCode=13;return formatoDecimal(event,this.id)',
            'control_name' => 'fafactur[btufin]',
    ));
    echo $value ? $value : '&nbsp;'
    ?>
        </div>
    </div>
<br>
</div>
<div id="rangofec">   
  <?php echo label_for('fafactur[fecfac]', __('Fecha Emision'), 'class="required" Style="text-align:left; width:150px"') ?>
    <?php  $value = object_input_date_tag($fafactur, 'getFecfac', array (
	'rich' => true,
	'calendar_button_img' => '/sf/sf_admin/images/date.png',
	'control_name' => 'fafactur[fecdes]',
	'date_format' => 'dd/MM/yyyy',
	'size' => 10,
	'maxlength' => 10,
	'onkeyup' => "javascript: mascara(this,'/',patron,true)",

	'onBlur'=> remote_function(array(
        'url'      => 'fafactur/ajax',
        'complete' => 'AjaxJSON(request, json)',
        'condition' => "$('fafactur_fecfac').value != '' && $('id').value == ''",
        'with' => "'ajax=17&codigo='+this.value"
        ))
),date('Y-m-d'));
echo $value ? $value : '&nbsp;'
	
	
//)); echo $value ? $value : '&nbsp;'
?>    
    <br>
  <?php echo label_for('fafactur[fecfindesc]', __('Fecha Vencimiento'), 'class="required" Style="text-align:left; width:150px"') ?>
    <?php  $value = object_input_date_tag($fafactur, 'getFecfindesc', array (
	'rich' => true,
	'calendar_button_img' => '/sf/sf_admin/images/date.png',
	'control_name' => 'fafactur[fecfindesc]',
	'date_format' => 'dd/MM/yyyy',
	'size' => 10,
	'maxlength' => 10,
	'onkeyup' => "javascript: mascara(this,'/',patron,true)",
)); echo $value ? $value : '&nbsp;'
?>      
</div>  
    <br>
    <br>
<div id="divcodalm">
<?php echo label_for('fafactur[codalm]', __($labels['fafactur{codalm}']), 'class="required"') ?>
<div
  class="content<?php if ($sf_request->hasError('fafactur{codalm}')): ?> form-error<?php endif; ?>">
<?php if ($sf_request->hasError('fafactur{codalm}')): ?> <?php echo form_error('fafactur{codalm}', array('class' => 'form-error-msg')) ?>
<?php endif; ?>

  <?php $value = object_input_tag($fafactur, 'getCodalm', array (
  'size' => 10,
  'maxlength' => 6,
  'control_name' => 'fafactur[codalm]',
  'onBlur'=> remote_function(array(
              'url' => 'fafactur/ajax',
        'condition' => "$('fafactur_codalm').value!=''",
        'complete' => 'AjaxJSON(request, json)',
          'with' => "'ajax=34&cajtexmos=fafactur_desalm&cajtexcom=fafactur_codalm&codigo='+this.value",
        )),
)); echo $value ? $value : '&nbsp;' ?>

<?php echo  button_to_popup('...',cross_app_link_to('herramientas','catalogo').'/metodo/Cadefalm_Alminvfis/clase/Cadefalm/frame/sf_admin_edit_form/obj1/fafactur_codalm/obj2/fafactur_desalm/campo1/codalm/campo2/nomalm')?>

<?php $value = object_input_tag($fafactur, 'getDesalm', array (
    'size' => 50,
    'maxlength' => 50,
    'disabled' => true,
    'control_name' => 'fafactur[desalm]',
    )); echo $value ? $value : '&nbsp;' ?>   
</div> </div>
<br>
<div id="divporped" style="display: none">
  <?php echo label_for('fafactur[porped]', __($labels['fafactur{porped}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{porped}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{porped}')): ?>
    <?php echo form_error('fafactur{porped}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

    <?php  $value = object_input_tag($fafactur, array ('getPorped',true), array (
          'size' => 10,
          'class' => 'grid_txtright',
          'onBlur' => 'event.keyCode=13; formatoDecimal(event,this.id); calcularPorcentajeCant(event,this.id);',
          'control_name' => 'fafactur[porped]',
  ));
  echo $value ? $value : '&nbsp;'
  ?>
        </div>
    </div>    

<ul class="sf_admin_actions">
<li>
<input id="pedid" class="sf_admin_action_save" type="button" value="Pedidos Emitidos" onClick="despachos_pedido();">
</li>
<li>
<input id="despach" class="sf_admin_action_save" type="button" value="Despachos Emitidos" onClick="despachos_pedido();">
</li>
<li>
<?php $cametifor=H::getConfApp2('cametifor', 'facturacion', 'fapresup');
if ($cametifor=='S') { ?>
<input id="presupu" class="sf_admin_action_save" type="button" value="Cotizaciones Emitidas" onClick="despachos_pedido();">
<?php }else { ?>
<input id="presupu" class="sf_admin_action_save" type="button" value="Presupuestos Emitidos" onClick="despachos_pedido();">
<?php  } ?>
</li>
<!--
<li>
<input id="descuent" class="sf_admin_action_save" type="button" value="Descuentos" onClick="descuentos();">
</li>
<li>
<input id="recarg" class="sf_admin_action_save" type="button" value="Recargos" onClick="recargos();">
</li>
-->
</ul>
<br/>
<div id="listArt" style="display:none" align="center">
<fieldset id="sf_fieldset_detalle" class="">
<legend><?php echo __('Proveedores con Mercancía a Consignacion')?></legend>
<div class="form-row">
  <?php echo label_for('fafactur[listaart]', __($labels['fafactur{listaart}' ]), 'class="required" id="label19" Style="text-align:left"; width:500px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{listaart}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{listaart}')): ?>
    <?php echo form_error('fafactur{listaart}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>
<div id="lista">
 <?php echo select_tag('fafactur[listaart]', options_for_select(Constantes::ListaRefiereA(),$fafactur->getListaart()),array(
  'onfocus' => "colocarengrid();",
  'multiple' => true,
  'size' => 10,
  'style'=> "width:500px; height:250px;",
  )) ?>
</div>
<div>
</fieldset>
</div>
<br/>
<div id="listaPedidosDespachos" style="display:none">
<fieldset id="sf_fieldset_detalle" class="">
<div id="fechasper" style="display:none">
  <?php echo label_for('fafactur[fecper1]', __('Período'), 'class="required" Style="text-align:left; width:150px"') ?>
    <?php  $value = object_input_date_tag($fafactur, 'getFecper1', array (
  'rich' => true,
  'calendar_button_img' => '/sf/sf_admin/images/date.png',
  'control_name' => 'fafactur[fecper1]',
  'date_format' => 'dd/MM/yyyy',
  'size' => 10,
  'maxlength' => 10,
  'onkeyup' => "javascript: mascara(this,'/',patron,true)",
)); echo $value ? $value : '&nbsp;'
?>    

<?php  $value = object_input_date_tag($fafactur, 'getFecper2', array (
  'rich' => true,
  'calendar_button_img' => '/sf/sf_admin/images/date.png',
  'control_name' => 'fafactur[fecper2]',
  'date_format' => 'dd/MM/yyyy',
  'size' => 10,
  'maxlength' => 10,
  'onkeyup' => "javascript: mascara(this,'/',patron,true)",
)); echo $value ? $value : '&nbsp;'
?>        

</div>  
    <br>
<div class="form-row" id="divgrid_fapeddes">
  <?php echo label_for('fafactur[grid_fapeddes]', __($labels['fafactur{grid_fapeddes}' ]), 'class="required" id="label2" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{grid_fapeddes}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{grid_fapeddes}')): ?>
    <?php echo form_error('fafactur{grid_fapeddes}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>
 <div id="peddes">
  <?php $value = get_partial('grid_fapeddes', array('type' => 'edit', 'fafactur' => $fafactur)); echo $value ? $value : '&nbsp;' ?>
 </div>
  </div>
<br>
<ul class="sf_admin_actions">
<li class="float-rigth">
<input id="ocul2" class="sf_admin_action_save" type="button" value="ocultar" onClick="ocul_ped_des();">
</li>
</ul>
</div>
</fieldset>
</div>
<br/>
<div id="divgrid_faartfac">
   <?php if($labels['fafactur{grid_faartfac}']!='.:') { ?>
  <?php echo label_for('fafactur[grid_faartfac]', __($labels['fafactur{grid_faartfac}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{grid_faartfac}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{grid_faartfac}')): ?>
    <?php echo form_error('fafactur{grid_faartfac}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>   

 <div id="articulos">
  <?php $value = get_partial('grid_faartfac', array('type' => 'edit', 'fafactur' => $fafactur)); echo $value ? $value : '&nbsp;' ?>
 </div>
  <?php echo object_input_hidden_tag($fafactur, 'getTotcanpreart', array('id' => 'fafactur_totcanpreart', 'name' => 'fafactur[totcanpreart]')) ?>
  <?php echo object_input_hidden_tag($fafactur, 'getTottotart', array('id' => 'fafactur_tottotart', 'name' => 'fafactur[tottotart]')) ?>
  <?php echo object_input_hidden_tag($fafactur, 'getTotmonrgo', array('id' => 'fafactur_totmonrgo', 'name' => 'fafactur[totmonrgo]')) ?>
  <?php echo object_input_hidden_tag($fafactur, 'getTotprecio', array('id' => 'fafactur_totprecio', 'name' => 'fafactur[totprecio]')) ?>
      <?php if($labels['fafactur{grid_faartfac}']!='.:') { ?>     
  </div>
  <?php  } ?> 
</div>
<br/>
<div id="datosDesc" style="display:none">
<div id="divgrid_fadescart">
  <?php if($labels['fafactur{grid_fadescart}']!='.:') { ?>
  <?php echo label_for('fafactur[grid_fadescart]', __($labels['fafactur{grid_fadescart}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{grid_fadescart}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{grid_fadescart}')): ?>
    <?php echo form_error('fafactur{grid_fadescart}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  

  <?php $value = get_partial('grid_fadescart', array('type' => 'edit', 'fafactur' => $fafactur)); echo $value ? $value : '&nbsp;' ?>

  <?php if($labels['fafactur{grid_fadescart}']!='.:') { ?>      
  </div>
  <?php  } ?> 
</div>
<br/>
<table>
<tr>
<th>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</th>
<th>
<?php echo link_to_function(image_tag('/images/salir.gif'), "salvarmontodescuentos()") ?> <font color="#1630EE" size="1" face="Verdana, Arial, Helvetica, sans-serif">
<p align="center"><?php echo __('Ocultar') ?></p></font>
</th>
<th>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</th>
<th>
<div id="divtotdesc" >
  <?php echo label_for('fafactur[totdesc]', __($labels['fafactur{totdesc}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{totdesc}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{totdesc}')): ?>
    <?php echo form_error('fafactur{totdesc}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_input_tag($fafactur, 'getTotdesc', array (
	'readonly' => true,
	'class' => 'grid_txtright',
	'control_name' => 'fafactur[totdesc]',

));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>
</th></tr></table>
</div>
<br/>
<div id="datosRecarg" style="display:none">
<div id="divgrid_fargoart">
  <?php if($labels['fafactur{grid_fargoart}']!='.:') { ?>
  <?php echo label_for('fafactur[grid_fargoart]', __($labels['fafactur{grid_fargoart}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{grid_fargoart}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{grid_fargoart}')): ?>
    <?php echo form_error('fafactur{grid_fargoart}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  

  <?php $value = get_partial('grid_fargoart', array('type' => 'edit', 'fafactur' => $fafactur)); echo $value ? $value : '&nbsp;' ?>
 <?php if($labels['fafactur{grid_fargoart}']!='.:') { ?>     
  </div>
  <?php  } ?> 
</div>
<br/>
<table>
<tr>
<th>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</th>
<th>
<?php echo link_to_function(image_tag('/images/salir.gif'), "salvarmontorecargos()") ?> <font color="#1630EE" size="1" face="Verdana, Arial, Helvetica, sans-serif">
<p align="center"><?php echo __('Ocultar') ?></p></font>
</th>
<th>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</th>
<th>
<div id="divtotrec" >
  <?php echo label_for('fafactur[totrec]', __($labels['fafactur{totrec}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{totrec}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{totrec}')): ?>
    <?php echo form_error('fafactur{totrec}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_input_tag($fafactur, 'getTotrec', array (
	'readonly' => true,
	'class' => 'grid_txtright',
	'control_name' => 'fafactur[totrec]',

));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>
</th></tr></table>
<br/>
</div>
<br/>
<div id="divgrid_fafaclib">
  <?php if($labels['fafactur{grid_fafaclib}']!='.:') { ?>
  <?php echo label_for('fafactur[grid_fafaclib]', __($labels['fafactur{grid_fafaclib}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{grid_fafaclib}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{grid_fafaclib}')): ?>
    <?php echo form_error('fafactur{grid_fafaclib}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>



  <?php $value = get_partial('grid_fafaclib', array('type' => 'edit', 'fafactur' => $fafactur,'labels' => $labels,'params' => $params)); echo $value ? $value : '&nbsp;' ?>


  <?php if($labels['fafactur{grid_fafaclib}']!='.:') { ?>



  </div>
  <?php  } ?>

</div>
<br/>
</div>
</fieldset>
<h2 class="h2" onclick="javascript: return $('divForma de Pago').toggle();"><?php echo __('Forma de Pago') ?></h2>
<fieldset id="sf_fieldset_forma_de_pago" class="">

<div class="form-row" id="divForma de Pago">
<div id="divcodtip">
  <?php if($labels['fafactur{codtip}']!='.:') { ?>
  <?php echo label_for('fafactur[codtip]', __($labels['fafactur{codtip}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{codtip}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{codtip}')): ?>
    <?php echo form_error('fafactur{codtip}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>



  <?php $value = get_partial('codtip', array('type' => 'edit', 'fafactur' => $fafactur,'labels' => $labels,'params' => $params)); echo $value ? $value : '&nbsp;' ?>


  <?php if($labels['fafactur{codtip}']!='.:') { ?>



  </div>
  <?php  } ?>

</div>
<br/>
<div id="divgrid_faforpag">
  <?php if($labels['fafactur{grid_faforpag}']!='.:') { ?>
  <?php echo label_for('fafactur[grid_faforpag]', __($labels['fafactur{grid_faforpag}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{grid_faforpag}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{grid_faforpag}')): ?>
    <?php echo form_error('fafactur{grid_faforpag}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  

  <?php $value = get_partial('grid_faforpag', array('type' => 'edit', 'fafactur' => $fafactur)); echo $value ? $value : '&nbsp;' ?>
  <?php if($labels['fafactur{grid_faforpag}']!='.:') { ?>     
  </div>
  <?php  } ?> 
</div>
<br/>
<table><tr><th>
<div id="divmoncan">
  <?php echo label_for('fafactur[moncan]', __($labels['fafactur{moncan}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{moncan}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{moncan}')): ?>
    <?php echo form_error('fafactur{moncan}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_input_tag($fafactur, 'getMoncan', array (
	'readonly' => true,
	'class' => 'grid_txtright',
	'size' => 10,
	'control_name' => 'fafactur[moncan]',

));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>
</th><th>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</th><th>
<div id="divmonres">
  <?php echo label_for('fafactur[monres]', __($labels['fafactur{monres}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{monres}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{monres}')): ?>
    <?php echo form_error('fafactur{monres}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_input_tag($fafactur, 'getMonres', array (
	'readonly' => true,
	'class' => 'grid_txtright',
	'size' => 10,
	'control_name' => 'fafactur[monres]',
));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>
</th><th>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</th><th>
<div id="divvuelto">
  <?php echo label_for('fafactur[vuelto]', __($labels['fafactur{vuelto}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{vuelto}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{vuelto}')): ?>
    <?php echo form_error('fafactur{vuelto}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_input_tag($fafactur, array ('getVuelto',true), array (
	'size' => 10,
	'readonly' => true,
	'class' => 'grid_txtright',
	'onKeyPress' => 'return validaDecimal(event)',
	'onBlur' => 'event.keyCode=13;return formatoDecimal(event,this.id)',
	'control_name' => 'fafactur[vuelto]',

));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>
</th></tr></table>
</div>
</fieldset>
<h2 class="h2" onclick="javascript: return $('divDescripción Detallada/Sucursal').toggle();"><?php echo __('Descripción Detallada/Sucursal') ?></h2>
<fieldset id="sf_fieldset_descripci__n_detallada_sucursal" class="">

<div class="form-row" id="divDescripción Detallada/Sucursal">

<?php
/*
<div id="divobserv">
  <?php echo label_for('fafactur[observ]', __($labels['fafactur{observ}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{observ}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{observ}')): ?>
    <?php echo form_error('fafactur{observ}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_textarea_tag($fafactur, 'getObserv', array (
  'control_name' => 'fafactur[observ]',
  'size' => '80x5',
  'maxlength' => 500,
  'onkeyup' => 'return ismaxlength(this)',

));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>
*/
?>

<br/>
<div id="divsucursal">
  <?php echo label_for('fafactur[sucursal]', __($labels['fafactur{sucursal}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{sucursal}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{sucursal}')): ?>
    <?php echo form_error('fafactur{sucursal}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_input_tag($fafactur, 'getSucursal', array (
	'size' => 50,
	'control_name' => 'fafactur[sucursal]',
	'maxlength' => 50,

));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>
<br/>
<div id="divobsfac">
  <?php echo label_for('fafactur[obsfac]', __($labels['fafactur{obsfac}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{obsfac}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{obsfac}')): ?>
    <?php echo form_error('fafactur{obsfac}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>

  <?php
 $value = object_textarea_tag($fafactur, 'getObsfac', array (
	'control_name' => 'fafactur[obsfac]',
	'size' => '80x5',
	'maxlength' => 500,
	'onkeyup' => 'return ismaxlength(this)',

));
echo $value ? $value : '&nbsp;'
?>
    </div>
</div>
<br/>
</div>
</fieldset>
<h2 class="h2" onclick="javascript: return $('divOtros Datos').toggle();"><?php echo __('Otros Datos') ?></h2>
<fieldset id="sf_fieldset_otros_datos" class="">

<div class="form-row" id="divOtros Datos">
<div id="divnroordfac">
  <?php if($labels['fafactur{nroordfac}']!='.:') { ?>
  <?php echo label_for('fafactur[nroordfac]', __($labels['fafactur{nroordfac}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{nroordfac}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{nroordfac}')): ?>
    <?php echo form_error('fafactur{nroordfac}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_tag($fafactur, 'getNroordfac', array (
  'size' => 20,
  'control_name' => 'fafactur[nroordfac]',
  'maxlength' => 50,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{nroordfac}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divcodpropat">
  <?php if($labels['fafactur{codpropat}']!='.:') { ?>
  <?php echo label_for('fafactur[codpropat]', __($labels['fafactur{codpropat}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{codpropat}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{codpropat}')): ?>
    <?php echo form_error('fafactur{codpropat}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
    
  <?php echo Catalogo($fafactur, 38, array (
  'getprincipal' => 'getCodpropat',
  'getsecundario' => 'getDespropat',
  'campoprincipal' => 'codpropat',
  'camposecundario' => 'despropat',
  'campobase' => 'id',
),  'Fapropat_Fafactur',  'Fapropat',  '',  '',  '');?>

    
  <?php if($labels['fafactur{codpropat}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divcodprorad">
  <?php if($labels['fafactur{codprorad}']!='.:') { ?>
  <?php echo label_for('fafactur[codprorad]', __($labels['fafactur{codprorad}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{codprorad}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{codprorad}')): ?>
    <?php echo form_error('fafactur{codprorad}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
    
  <?php echo Catalogo($fafactur, 39, array (
  'getprincipal' => 'getCodprorad',
  'getsecundario' => 'getDesprorad',
  'campoprincipal' => 'codprorad',
  'camposecundario' => 'desprorad',
  'campobase' => 'id',
),  'Faprorad_Fafactur',  'Faprorad',  '',  '',  '');?>

    
  <?php if($labels['fafactur{codprorad}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divversion">
  <?php if($labels['fafactur{version}']!='.:') { ?>
  <?php echo label_for('fafactur[version]', __($labels['fafactur{version}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{version}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{version}')): ?>
    <?php echo form_error('fafactur{version}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_tag($fafactur, 'getVersion', array (
  'size' => 20,
  'control_name' => 'fafactur[version]',
  'maxlength' => 50,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{version}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<br/>
<div id="divfectrades">
  <?php if($labels['fafactur{fectrades}']!='.:') { ?>
  <?php echo label_for('fafactur[fectrades]', __($labels['fafactur{fectrades}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{fectrades}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{fectrades}')): ?>
    <?php echo form_error('fafactur{fectrades}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_date_tag($fafactur, 'getFectrades', array (
  'rich' => true,
  'onkeyup' => 'javascript: mascara(this,\'/\',patron,true)',
  'calendar_button_img' => '/sf/sf_admin/images/date.png',
  'control_name' => 'fafactur[fectrades]',
  'date_format' => 'dd/MM/yyyy',
  'size' => 10,
  'maxlength' => 10,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{fectrades}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divfectrahas">
  <?php if($labels['fafactur{fectrahas}']!='.:') { ?>
  <?php echo label_for('fafactur[fectrahas]', __($labels['fafactur{fectrahas}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{fectrahas}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{fectrahas}')): ?>
    <?php echo form_error('fafactur{fectrahas}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_date_tag($fafactur, 'getFectrahas', array (
  'rich' => true,
  'onkeyup' => 'javascript: mascara(this,\'/\',patron,true)',
  'calendar_button_img' => '/sf/sf_admin/images/date.png',
  'control_name' => 'fafactur[fectrahas]',
  'date_format' => 'dd/MM/yyyy',
  'size' => 10,
  'maxlength' => 10,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{fectrahas}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divfrectra">
  <?php if($labels['fafactur{frectra}']!='.:') { ?>
  <?php echo label_for('fafactur[frectra]', __($labels['fafactur{frectra}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{frectra}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{frectra}')): ?>
    <?php echo form_error('fafactur{frectra}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_tag($fafactur, 'getFrectra', array (
  'size' => 20,
  'control_name' => 'fafactur[frectra]',
  'maxlength' => 50,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{frectra}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divduracion">
  <?php if($labels['fafactur{duracion}']!='.:') { ?>
  <?php echo label_for('fafactur[duracion]', __($labels['fafactur{duracion}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{duracion}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{duracion}')): ?>
    <?php echo form_error('fafactur{duracion}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_tag($fafactur, 'getDuracion', array (
  'size' => 20,
  'control_name' => 'fafactur[duracion]',
  'maxlength' => 50,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{duracion}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divobstra">
  <?php if($labels['fafactur{obstra}']!='.:') { ?>
  <?php echo label_for('fafactur[obstra]', __($labels['fafactur{obstra}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{obstra}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{obstra}')): ?>
    <?php echo form_error('fafactur{obstra}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_tag($fafactur, 'getObstra', array (
  'size' => 80,
  'control_name' => 'fafactur[obstra]',
  'maxlength' => 50,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{obstra}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
</div>
</fieldset>

<h2 class="h2" onclick="javascript: return $('divDatos Adicionales').toggle();"><?php echo __('Datos Adicionales') ?></h2>
<fieldset id="sf_fieldset_datos_adicionales" class="">

<div class="form-row" id="divDatos Adicionales">
<div id="divmuelle">
  <?php if($labels['fafactur{muelle}']!='.:') { ?>
  <?php echo label_for('fafactur[muelle]', __($labels['fafactur{muelle}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{muelle}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{muelle}')): ?>
    <?php echo form_error('fafactur{muelle}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_tag($fafactur, 'getMuelle', array (
  'size' => 80,
  'control_name' => 'fafactur[muelle]',
  'maxlength' => 100,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{muelle}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divbuque2">
  <?php if($labels['fafactur{buque2}']!='.:') { ?>
  <?php echo label_for('fafactur[buque2]', __($labels['fafactur{buque2}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{buque2}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{buque2}')): ?>
    <?php echo form_error('fafactur{buque2}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_tag($fafactur, 'getBuque2', array (
  'size' => 80,
  'control_name' => 'fafactur[buque2]',
  'maxlength' => 250,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{buque2}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divexpedi">
  <?php if($labels['fafactur{expedi}']!='.:') { ?>
  <?php echo label_for('fafactur[expedi]', __($labels['fafactur{expedi}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{expedi}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{expedi}')): ?>
    <?php echo form_error('fafactur{expedi}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_tag($fafactur, 'getExpedi', array (
  'size' => 50,
  'control_name' => 'fafactur[expedi]',
  'maxlength' => 50,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{expedi}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divbele">
  <?php if($labels['fafactur{bele}']!='.:') { ?>
  <?php echo label_for('fafactur[bele]', __($labels['fafactur{bele}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{bele}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{bele}')): ?>
    <?php echo form_error('fafactur{bele}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_tag($fafactur, 'getBele', array (
  'size' => 80,
  'control_name' => 'fafactur[bele]',
  'maxlength' => 100,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{bele}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divfactura">
  <?php if($labels['fafactur{factura}']!='.:') { ?>
  <?php echo label_for('fafactur[factura]', __($labels['fafactur{factura}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{factura}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{factura}')): ?>
    <?php echo form_error('fafactur{factura}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_tag($fafactur, 'getFactura', array (
  'size' => 50,
  'control_name' => 'fafactur[factura]',
  'maxlength' => 50,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{factura}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divembarca">
  <?php if($labels['fafactur{embarca}']!='.:') { ?>
  <?php echo label_for('fafactur[embarca]', __($labels['fafactur{embarca}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{embarca}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{embarca}')): ?>
    <?php echo form_error('fafactur{embarca}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_tag($fafactur, 'getEmbarca', array (
  'size' => 80,
  'control_name' => 'fafactur[embarca]',
  'maxlength' => 250,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{embarca}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divdescarga">
  <?php if($labels['fafactur{descarga}']!='.:') { ?>
  <?php echo label_for('fafactur[descarga]', __($labels['fafactur{descarga}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{descarga}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{descarga}')): ?>
    <?php echo form_error('fafactur{descarga}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_tag($fafactur, 'getDescarga', array (
  'size' => 80,
  'control_name' => 'fafactur[descarga]',
  'maxlength' => 250,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{descarga}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divcanbul">
  <?php if($labels['fafactur{canbul}']!='.:') { ?>
  <?php echo label_for('fafactur[canbul]', __($labels['fafactur{canbul}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{canbul}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{canbul}')): ?>
    <?php echo form_error('fafactur{canbul}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_tag($fafactur, array('getCanbul',true), array (
  'size' => 7,
  'onKeyPress' => 'return validaDecimal(event)',
  'onBlur' => 'event.keyCode=13;return formatoDecimal(event,this.id)',
  'control_name' => 'fafactur[canbul]',
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{canbul}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divcodprod">
  <?php if($labels['fafactur{codprod}']!='.:') { ?>
  <?php echo label_for('fafactur[codprod]', __($labels['fafactur{codprod}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{codprod}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{codprod}')): ?>
    <?php echo form_error('fafactur{codprod}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
    
  <?php echo Catalogo($fafactur, 41, array (
  'getprincipal' => 'getCodprod',
  'getsecundario' => 'getDesprod',
  'campoprincipal' => 'codprod',
  'camposecundario' => 'desprod',
  'campobase' => 'id',
),  'Fadefpro_Fafacturpro',  'Fadefpro',  '',  '',  '');?>

    
  <?php if($labels['fafactur{codprod}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divtmdesc">
  <?php if($labels['fafactur{tmdesc}']!='.:') { ?>
  <?php echo label_for('fafactur[tmdesc]', __($labels['fafactur{tmdesc}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{tmdesc}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{tmdesc}')): ?>
    <?php echo form_error('fafactur{tmdesc}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_tag($fafactur, array('getTmdesc',true), array (
  'size' => 7,
  'onKeyPress' => 'return validaDecimal(event)',
  'onBlur' => 'event.keyCode=13;return formatoDecimal(event,this.id)',
  'control_name' => 'fafactur[tmdesc]',
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{tmdesc}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divfecatra">
  <?php if($labels['fafactur{fecatra}']!='.:') { ?>
  <?php echo label_for('fafactur[fecatra]', __($labels['fafactur{fecatra}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{fecatra}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{fecatra}')): ?>
    <?php echo form_error('fafactur{fecatra}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_date_tag($fafactur, 'getFecatra', array (
  'rich' => true,
  'onkeyup' => 'javascript: mascara(this,\'/\',patron,true)',
  'calendar_button_img' => '/sf/sf_admin/images/date.png',
  'control_name' => 'fafactur[fecatra]',
  'date_format' => 'dd/MM/yyyy',
  'size' => 10,
  'maxlength' => 10,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{fecatra}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divfecinidesc">
  <?php if($labels['fafactur{fecinidesc}']!='.:') { ?>
  <?php echo label_for('fafactur[fecinidesc]', __($labels['fafactur{fecinidesc}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{fecinidesc}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{fecinidesc}')): ?>
    <?php echo form_error('fafactur{fecinidesc}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_date_tag($fafactur, 'getFecinidesc', array (
  'rich' => true,
  'onkeyup' => 'javascript: mascara(this,\'/\',patron,true)',
  'calendar_button_img' => '/sf/sf_admin/images/date.png',
  'control_name' => 'fafactur[fecinidesc]',
  'date_format' => 'dd/MM/yyyy',
  'size' => 10,
  'maxlength' => 10,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{fecinidesc}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divfecfindesc">
  <?php if($labels['fafactur{fecfindesc}']!='.:') { ?>
  <?php echo label_for('fafactur[fecfindesc]', __($labels['fafactur{fecfindesc}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{fecfindesc}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{fecfindesc}')): ?>
    <?php echo form_error('fafactur{fecfindesc}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_date_tag($fafactur, 'getFecfindesc', array (
  'rich' => true,
  'onkeyup' => 'javascript: mascara(this,\'/\',patron,true)',
  'calendar_button_img' => '/sf/sf_admin/images/date.png',
  'control_name' => 'fafactur[fecfindesc]',
  'date_format' => 'dd/MM/yyyy',
  'size' => 10,
  'maxlength' => 10,
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{fecfindesc}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
<div id="divvalcifs">
  <?php if($labels['fafactur{valcifs}']!='.:') { ?>
  <?php echo label_for('fafactur[valcifs]', __($labels['fafactur{valcifs}' ]), 'class="required" Style="text-align:left; width:150px"') ?>
  <div class="content<?php if ($sf_request->hasError('fafactur{valcifs}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('fafactur{valcifs}')): ?>
    <?php echo form_error('fafactur{valcifs}', array('class' => 'form-error-msg')) ?>
  <?php endif; }?>  
  
   
  
  <?php $value = object_input_tag($fafactur, array('getValcifs',true), array (
  'size' => 7,
  'onKeyPress' => 'return validaDecimal(event)',
  'onBlur' => 'event.keyCode=13;return formatoDecimal(event,this.id)',
  'control_name' => 'fafactur[valcifs]',
)); echo $value ? $value : '&nbsp;' ?>
      
    
  <?php if($labels['fafactur{valcifs}']!='.:') { ?>  
  

   
  </div>
  <?php  } ?> 

</div>
<br/>
</div>
</fieldset>

</div>
<?php include_partial('edit_actions', array('fafactur' => $fafactur)) ?>

</form>

<ul class="sf_admin_actions">
<li class="float-rigth">
<?php if ($fafactur->getId() && $fafactur->getStatus()!='N' && H::Puede_Eliminar($sf_user->getAttribute('loguse'),$sf_context->getModuleName(),$sf_user->getAttribute('empresa'))) {?>
  <input type="button" name="Submit" value="Anular" class="sf_admin_action_delete" onclick="javascript:anular();" />
<?php }?>
</li>
<li class="float-left"><?php if ($fafactur->getId()): ?>
<?php
 echo button_to(__('delete'), 'fafactur/delete?id=' . $fafactur->getId(), array (
	'post' => true,
	'confirm' => __('Are you sure?'
), 'class' => 'sf_admin_action_delete',))
?><?php endif; ?>
</li>
  </ul>

<script language="JavaScript" type="text/javascript">
var bloqreffac='<?php echo $fafactur->getBlonumfac(); ?>';
if (bloqreffac) $('fafactur_reffac').readOnly=true;

var deshab='<?php echo H::getConfApp2('bloqfec', 'facturacion', 'fafactur'); ?>';
if (deshab=='S')
{
  $('trigger_fafactur_fecfac').hide();
  $('fafactur_fecfac').readOnly=true;
}

var mosotrdat='<?php  echo H::getConfApp2('mosotrdat', 'facturacion', 'fafactur');?>';
if (mosotrdat=='S')
{
  $('divDatos Adicionales').show();
  $$('.h2')[5].show();
}else {
  $('divDatos Adicionales').hide();
  $$('.h2')[5].hide();
}

 var valor='<?php echo H::getX_vacio('CODMON','Tsdesmon','Valmon',H::getX_vacio('CODEMP', 'Opdefemp', 'Codmon', '001'));?>';
    if (valor!="")
    {
        calculo=toFloat2(valor);
        var num2=toFloat('fafactur_valmon');
        if (num2==0)
           $('fafactur_valmon').value=format(calculo.toFixed(6),'.',',','.');
    }

var grabo='<?php echo $grabo;?>';
var moscomp="<?php echo H::getConfApp2('moscomp', 'facturacion', 'fafactur');?>";

if (moscomp=='S' && grabo=='S')
{
  if(confirm("¿Desea consultar el Comprobante Contable?"))
  {
    var numcomdes=$('fafactur_numcom').value;
    var numcomhas=$('fafactur_numcom').value;
    var  ruta='http://'+'<? echo $this->getContext()->getRequest()->getHost();?>';
    pagina=ruta+"/<? echo $sf_user->getAttribute('reportes_web');?>/contabilidad/r.php?r=comprobante.php&com1="+numcomdes+"&com2="+numcomhas;
    window.open(pagina,1,"menubar=yes,toolbar=yes,scrollbars=yes,width=1200,height=800,resizable=yes,left=1000,top=80")
  }
}

var consul='<?php echo $fafactur->getId(); ?>';
if (consul!="")
{
  mostrarPromedio();
  calcularPago();
  mostrarPromedio();
  if ($('fafactur_tipref').value=='E'){
    $('listaPedidosDespachos').show();
    $('fechasper').show();
    $('divgrid_fapeddes').hide(); 
    $('rangofec').hide();
  }
    
}else {
    var mansolcor='<?php echo $fafactur->getMansolcor()?>';
    if (mansolcor=='S')
    {
        $('fafactur_numcontrol').value='##########';
        $('fafactur_numcontrol').readOnly=true;
    }
    $('marcarrecargos').show();     
}

var gridfaclib='<?php echo $fafactur->getGridfaclib()?>';
if (gridfaclib=='S' && consul!="")
{
    $('divgrid_fafaclib').show();
}else { $('divgrid_fafaclib').hide(); }

 $('fafactur_tipper_J').disabled=true;
 $('fafactur_tipper_N').disabled=true;
 $('pedid').hide();
 $('presupu').hide();
 $('despach').hide();
 var ensesion='<?php echo $sf_user->getAttribute('clavecaja','','fafactur')?>';
 var gencomext="<?php echo H::getConfApp2('gencomext', 'facturacion', 'fafactur');?>"
 if (ensesion=="" && consul=="")
 {
   $('CajaPrinc').show();
   $$('.sf_admin_action_list')[0].hide();
   if (gencomext=='S')
     $$('.sf_admin_action_save')[6].hide();
   else
     $$('.sf_admin_action_save')[5].hide();
   $$('.sf_admin_action_create')[0].hide();
 }else if (ensesion!="" && consul=="")
 {
   $('FormaPrinc').show();
   if ($('fafactur_tipo').value=='F')
   {
   	$('fafactur_reffac').readOnly=true;
   }
 }
 else
 {
 	$('FormaPrinc').show();
 }
 
 if (consul=='')
 {
     var mansolped='<?php echo H::getConfApp2('mansolped', 'facturacion', 'fafactur'); ?>';
    if (mansolped=='S')
    {
        $('fafactur_tipref').value='P';
        cambios();
    }
    
    var oculaplrec='<?php echo H::getConfApp2('oculaplrec', 'facturacion', 'fafactur'); ?>';
    if (oculaplrec=='S')
    {
        $('marcarrecargos').hide();
        $('opcionajucal').show();
    }
    
    var puertos='<?php echo H::getConfApp2('puertos', 'facturacion', 'fafactur'); ?>';
    if (puertos=='S')
    {
        $('divpuedph').show();
        $('divpuedes').show();
        $('divbuque').show();
    }
 }

 var oculcampos='<?php echo H::getConfApp2('oculcam', 'facturacion', 'fafactur'); ?>';
    if (oculcampos=='S')
    {
        $('divcodcon').hide();
        $('divtipoven').hide();
        $('divcodcenaco').hide();
        $('divcodalm').hide();
    }

var oculotrdat='<?php  echo H::getConfApp2('oculotrdat', 'facturacion', 'fafactur');?>';
if (oculotrdat=='S')
{
  $('divOtros Datos').hide();
  $$('.h2')[4].hide();
}

  function enter(e,valor)
 {
   if (e.keyCode==13 || e.keyCode==9)
   {
     if (valor!='')
     { valor=valor.pad(8, '0',0);}
     $('fafactur_reffac').value=valor;
     $('fafactur_fecfac').focus();
   }
 }

 function perderfocus(e,id,totcol)
 {
   var aux = id.split("_");
   var name=aux[0];
   var fil=parseInt(aux[1]);
   var col=parseInt(aux[2]);

   if (col!=totcol)
   {
    var colsig=col+1;
    var siguiente=name+"_"+fil+"_"+colsig;
   }
   else
   {
    var fila=fil+1;
   	var siguiente=name+"_"+fila+"_1";
   }

   if (e.keyCode==13 || e.keyCode==9)
   {
     if($(siguiente))
     {
      if (!$(siguiente).readOnly) $(siguiente).focus();
     }
   }
  }

  function refproform()
  {
    if (!$('fafactur_refproform').checked)
    {
        $('fafactur_refproform').checked=false;
        $('thproform').hide();
    }else
    {
        $('thproform').show();
    }

  }
  
   function comprobante(formulario)
  {
      window.open('/tesoreria'+getEnv()+'.php/confincomgen/edit/?formulario='+formulario,formulario,'menubar=no,toolbar=no,scrollbars=yes,width=1200,height=800,resizable=yes,left=1000,top=80');
  }
   function consultarComp()
  {
    window.open('/tesoreria'+getEnv()+'.php/confincomgen/edit/id/'+$("fafactur_idrefer").value,'...','menubar=no,toolbar=no,scrollbars=yes,width=1200,height=800,resizable=yes,left=1000,top=80');
  }
</script>
