<?php
// auto-generated by PropelCidesa
// date: 2011/02/08 15:49:13
?>
<?php

/**
 *
 * @package    Roraima
 * @subpackage vistas
 
 * @author     $Author: lhernandez $ <desarrollo@cidesa.com.ve>
 * @version    SVN: $Id: _edit_footer.php 32815 2009-09-08 16:52:04Z lhernandez $
 * @copyright  Copyright 2007, Cide S.A.
 *
 */
 ?>
 <?php 
   $pdfjasper="N";
   $dirrepconfig = $sf_user->getAttribute('reportes').'reportes/config.yml';
   $configyml = sfYaml::load($dirrepconfig);
   if(is_array($configyml)){
     if(array_key_exists('compras',$configyml)) {
       if(array_key_exists('almordcom',$configyml['compras'])) {     
         if(array_key_exists('parameterjasper',$configyml['compras']["almordcom"])) 
           $pdfjasper= $configyml["compras"]["almordcom"]["parameterjasper"];
      }
    }
  }
 ?>
<script type="text/javascript" language="Javascript">
$('divgridsc').hide();
$('divgridrec').hide();
$$('.h2')[9].hide()
$('divDatos del Beneficiario de la Donación').hide();

var nuevo='<?php echo $caordcom->getId() ?>';
if (nuevo=="")
{
    var manesolcorr='<?php echo $caordcom->getMansolocor(); ?>';
    if (manesolcorr=='S')
     {
        $('caordcom_ordcom').value='########';
     	$('caordcom_ordcom').readOnly=true;
        $('caordcom_doccom').focus();
     }
    $('divgridres').hide();
    $('divgridrespar').hide();
    $('divgridfecent').hide();
}else {
    if ($('caordcom_staord').value=='N')
    {
        $('anular').hide();
        $$('.sf_admin_action_delete')[1].hide();
    }
    var oculboteli='<?php echo $caordcom->getOculeli(); ?>';
    if (oculboteli=='S')
    {
        $$('.sf_admin_action_delete')[1].hide();
    }

    $('divbotgenres').hide();
    $('divbotgenrespar').hide();
    $('divbotgenfec').hide();
    ActualizarSaldosGrid("a",ArrTotales_a);
    total_completo();
}

  var deshab='<?php echo $caordcom->getBloqfec(); ?>';
  if (deshab=='S')
  {
  	$('trigger_caordcom_fecord').hide();
  	$('caordcom_fecord').readOnly=true;
  }

  var manorddon='<?php echo $caordcom->getManorddon();?>';
  if (manorddon=='S') {
      $$('.h2')[9].show()
      $('divDatos del Beneficiario de la Donación').show();
  }

  var tienedirdiv='<?php echo $caordcom->getTienedirdiv();?>';
  if (tienedirdiv!='S') {
     $('divcoddirec').hide();
     $('divcoddivi').hide();
  }

 function Mostrar_orden_preimpresa()
  {
      if(confirm("¿Desea imprimir la orden Pre-Impresa?"))
      {
            var ordcomdes=$('caordcom_ordcom').value;
            var ordcomhas=$('caordcom_ordcom').value;
            var codprodes='<?php echo $caordcom->getCodpro()?>';
            var codprohas='<?php echo $caordcom->getCodpro()?>';
            var fecorddes=$('caordcom_fecord').value;
            var fecordhas=$('caordcom_fecord').value;
            var status='Activas';
            var tipcom=$('caordcom_doccom').value;
            var nombrerep='<?php echo $caordcom->getNomreporte();?>';
            var  ruta='http://'+'<?php echo $this->getContext()->getRequest()->getHost();?>';
            var  mostrarjasper='<?php echo $pdfjasper;?>';
            var monofi='<?php echo H::getX_vacio('CODEMP', 'Opdefemp', 'Codmon', '001');?>';
            var repmonext='<?php echo H::getConfApp2('repmonext', 'compras', 'almordcom');?>';
            var moneord='<?php echo $caordcom->getTipmon()?>';

        if (repmonext=='S') {
          if (moneord!=monofi)
          {
             pagina=ruta+"/<?php echo $sf_user->getAttribute('reportes_web');?>/jasper.php?m=compras&r=carordpreext.php&s=<?php echo $sf_user->getAttribute('schema');?>&ordcomdes="+ordcomdes+"&ordcomhas="+ordcomhas+"&codprodes="+codprodes+"&codprohas="+codprohas+"&fecorddes="+fecorddes+"&fecordhas="+fecordhas+"&tipcom="+tipcom+"&doccom="+tipcom;
          }else {
            if (nombrerep!=''){     
              if (mostrarjasper=='S') 
                  pagina=ruta+"/<?php echo $sf_user->getAttribute('reportes_web');?>/jasper.php?m=compras&r="+nombrerep+".php&s=<?php echo $sf_user->getAttribute('schema');?>&ordcomdes="+ordcomdes+"&ordcomhas="+ordcomhas+"&codprodes="+codprodes+"&codprohas="+codprohas+"&fecorddes="+fecorddes+"&fecordhas="+fecordhas+"&tipcom="+tipcom+"&doccom="+tipcom;
              else
                pagina=ruta+"/reportes/reportes/compras/r.php=?r="+nombrerep+".php&ordcomdes="+ordcomdes+"&ordcomhas="+ordcomhas+"&codprodes="+codprodes+"&codprohas="+codprohas+"&fecorddes="+fecorddes+"&fecordhas="+fecordhas+"&tipcom="+tipcom+"&doccom="+tipcom;
            }else {
              if (mostrarjasper=='S') 
                  pagina=ruta+"/<?php echo $sf_user->getAttribute('reportes_web');?>/jasper.php?m=compras&r=<?php echo $caordcom->getReptipcom();?>&s=<?php echo $sf_user->getAttribute('schema');?>&ordcomdes="+ordcomdes+"&ordcomhas="+ordcomhas+"&codprodes="+codprodes+"&codprohas="+codprohas+"&fecorddes="+fecorddes+"&fecordhas="+fecordhas+"&tipcom="+tipcom+"&doccom="+tipcom;
              else
                pagina=ruta+"/reportes/reportes/compras/r.php=?r=<?php echo $caordcom->getReptipcom(); ?>&ordcomdes="+ordcomdes+"&ordcomhas="+ordcomhas+"&codprodes="+codprodes+"&codprohas="+codprohas+"&fecorddes="+fecorddes+"&fecordhas="+fecordhas+"&tipcom="+tipcom+"&doccom="+tipcom;
            }
          }
        }else {
          if (nombrerep!=''){     
              if (mostrarjasper=='S') 
                  pagina=ruta+"/<?php echo $sf_user->getAttribute('reportes_web');?>/jasper.php?m=compras&r="+nombrerep+".php&s=<?php echo $sf_user->getAttribute('schema');?>&ordcomdes="+ordcomdes+"&ordcomhas="+ordcomhas+"&codprodes="+codprodes+"&codprohas="+codprohas+"&fecorddes="+fecorddes+"&fecordhas="+fecordhas+"&tipcom="+tipcom+"&doccom="+tipcom;
              else
                pagina=ruta+"/reportes/reportes/compras/r.php=?r="+nombrerep+".php&ordcomdes="+ordcomdes+"&ordcomhas="+ordcomhas+"&codprodes="+codprodes+"&codprohas="+codprohas+"&fecorddes="+fecorddes+"&fecordhas="+fecordhas+"&tipcom="+tipcom+"&doccom="+tipcom;
            }else {
              if (mostrarjasper=='S') 
                  pagina=ruta+"/<?php echo $sf_user->getAttribute('reportes_web');?>/jasper.php?m=compras&r=<?php echo $caordcom->getReptipcom();?>&s=<?php echo $sf_user->getAttribute('schema');?>&ordcomdes="+ordcomdes+"&ordcomhas="+ordcomhas+"&codprodes="+codprodes+"&codprohas="+codprohas+"&fecorddes="+fecorddes+"&fecordhas="+fecordhas+"&tipcom="+tipcom+"&doccom="+tipcom;
              else
                pagina=ruta+"/reportes/reportes/compras/r.php=?r=<?php echo $caordcom->getReptipcom(); ?>&ordcomdes="+ordcomdes+"&ordcomhas="+ordcomhas+"&codprodes="+codprodes+"&codprohas="+codprohas+"&fecorddes="+fecorddes+"&fecordhas="+fecordhas+"&tipcom="+tipcom+"&doccom="+tipcom;
            }
        }
        window.open(pagina,1,"menubar=yes,toolbar=yes,scrollbars=yes,width=1200,height=800,resizable=yes,left=1000,top=80")
      }
  }
</script>